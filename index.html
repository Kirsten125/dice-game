<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dice Roller</title>

  <style>
    :root {
      --bg: #f6f7fb;
      --card: #ffffff;
      --text: #1f2937;
      --sub: #6b7280;
      --btn: #111827;
      --btnHover: #374151;
      --line: #e5e7eb;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      font-family: Arial, "Noto Sans TC", sans-serif;
      display: grid;
      place-items: center;
      padding: 20px;
    }

    .card {
      width: 100%;
      max-width: 820px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 22px;
      padding: 40px 34px;
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.07);
    }

    h1 {
      margin: 0 0 32px;
      text-align: center;
      font-size: 46px;
      font-weight: 900;
      letter-spacing: 1px;
      line-height: 1.3;
    }

    button {
      border: none;
      background: var(--btn);
      color: #fff;
      padding: 16px 24px;
      border-radius: 18px;
      font-size: 24px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.2s;
      min-width: 70px;
    }

    button:hover {
      background: var(--btnHover);
      transform: translateY(-2px);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .topArea {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 32px;
      margin-bottom: 45px;
    }

    .countControls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
    }

    .countBox {
      min-width: 90px;
      text-align: center;
      font-size: 34px;
      padding: 14px 20px;
      border: 1px solid var(--line);
      border-radius: 18px;
      background: #fafafa;
      font-weight: 900;
    }

    .rollBtn {
      font-size: 28px;
      padding: 18px 70px;
      border-radius: 22px;
      min-width: 220px;
    }

    .diceWrap {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      min-height: 200px;
      margin: 20px 0 10px;
      flex-wrap: wrap;
    }

    .dice {
      font-size: 115px;
      line-height: 1;
      user-select: none;
      transform-origin: center;
      will-change: transform, filter;
    }

    .rolling {
      animation: spinDice 0.8s ease;
    }

    @keyframes spinDice {
      0% {
        transform: rotate(0deg) scale(1);
        filter: blur(0);
      }
      30% {
        transform: rotate(180deg) scale(1.18);
        filter: blur(1px);
      }
      70% {
        transform: rotate(300deg) scale(1.1);
        filter: blur(0.6px);
      }
      100% {
        transform: rotate(360deg) scale(1);
        filter: blur(0);
      }
    }

    .result {
      text-align: center;
      font-size: 54px;
      font-weight: 900;
      margin-top: 18px;
      min-height: 70px;
      letter-spacing: 1px;
    }

    .help {
      margin-top: 30px;
      color: var(--sub);
      font-size: 16px;
      line-height: 2.0;
      border-top: 1px dashed var(--line);
      padding-top: 18px;
      text-align: center;
    }

    .help code {
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 3px 8px;
      font-size: 14px;
    }

    @media (max-width: 480px) {
      .card {
        padding: 30px 20px;
      }

      h1 {
        font-size: 34px;
        margin-bottom: 26px;
      }

      .topArea {
        gap: 22px;
        margin-bottom: 34px;
      }

      .countControls {
        gap: 22px;
      }

      button {
        font-size: 22px;
        padding: 14px 20px;
        min-width: 60px;
      }

      .countBox {
        font-size: 30px;
        min-width: 80px;
      }

      .rollBtn {
        width: 100%;
        max-width: 320px;
        font-size: 26px;
        padding: 16px 0;
      }

      .dice {
        font-size: 95px;
      }

      .diceWrap {
        gap: 25px;
      }

      .result {
        font-size: 46px;
      }
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>üé≤ Dice Roller üé≤</h1>

    <div class="topArea">
      <div class="countControls">
        <button id="minusBtn" type="button">-</button>
        <div class="countBox" id="diceCount">1</div>
        <button id="plusBtn" type="button">+</button>
      </div>

      <button id="rollBtn" type="button" class="rollBtn">Roll</button>
    </div>

    <div class="diceWrap" id="diceWrap"></div>

    <div class="result" id="result"></div>

    <div class="help">
      Âø´Êç∑ÈçµÔºö
      <code>+</code>/<code>-</code> Â¢ûÊ∏õÈ™∞Â≠êÔºö
      <code>1</code>/<code>2</code>/<code>3</code> ÂàáÊèõÔºö
      <code>R</code> Êàñ <code>Space</code> Êì≤È™∞Â≠ê
    </div>
  </div>

  <script>
    const DICE_ICONS = ["‚öÄ", "‚öÅ", "‚öÇ", "‚öÉ", "‚öÑ", "‚öÖ"];
    const MIN_DICE = 1;
    const MAX_DICE = 3;
    const ROLL_MS = 800;
    const SPIN_TICK_MS = 90;

    let diceCount = 1;
    let isRolling = false;
    let spinTimers = [];

    const diceWrap = document.getElementById("diceWrap");
    const diceCountEl = document.getElementById("diceCount");
    const resultEl = document.getElementById("result");
    const rollBtn = document.getElementById("rollBtn");
    const plusBtn = document.getElementById("plusBtn");
    const minusBtn = document.getElementById("minusBtn");

    function random1to6() {
      return Math.floor(Math.random() * 6) + 1;
    }

    function clearSpinTimers() {
      spinTimers.forEach((id) => clearInterval(id));
      spinTimers = [];
    }

    function renderDice() {
      diceWrap.innerHTML = "";
      for (let i = 0; i < diceCount; i++) {
        const d = document.createElement("div");
        d.className = "dice";
        d.textContent = "‚öÄ";
        diceWrap.appendChild(d);
      }
      diceCountEl.textContent = String(diceCount);
      resultEl.textContent = "";
    }

    function setDiceCount(next) {
      if (isRolling) return;
      diceCount = Math.max(MIN_DICE, Math.min(MAX_DICE, next));
      renderDice();
    }

    function rollDice() {
      if (isRolling) return;

      isRolling = true;
      rollBtn.disabled = true;
      plusBtn.disabled = true;
      minusBtn.disabled = true;

      const diceEls = Array.from(document.querySelectorAll(".dice"));

      diceEls.forEach((el) => {
        el.classList.add("rolling");
        const timer = setInterval(() => {
          const temp = random1to6();
          el.textContent = DICE_ICONS[temp - 1];
        }, SPIN_TICK_MS);
        spinTimers.push(timer);
      });

      setTimeout(() => {
        clearSpinTimers();

        const nums = diceEls.map((el) => {
          const n = random1to6();
          el.textContent = DICE_ICONS[n - 1];
          el.classList.remove("rolling");
          return n;
        });

        const total = nums.reduce((acc, n) => acc + n, 0);

        resultEl.textContent = `${total}`;

        isRolling = false;
        rollBtn.disabled = false;
        plusBtn.disabled = false;
        minusBtn.disabled = false;
      }, ROLL_MS);
    }

    plusBtn.addEventListener("click", () => setDiceCount(diceCount + 1));
    minusBtn.addEventListener("click", () => setDiceCount(diceCount - 1));
    rollBtn.addEventListener("click", rollDice);

    document.addEventListener("keydown", (e) => {
      const key = e.key;

      if (key === "+" || key === "=" || e.code === "NumpadAdd") {
        setDiceCount(diceCount + 1);
        return;
      }

      if (key === "-" || key === "_" || e.code === "NumpadSubtract") {
        setDiceCount(diceCount - 1);
        return;
      }

      if (key === "1" || key === "2" || key === "3") {
        setDiceCount(Number(key));
        return;
      }

      if (key.toLowerCase() === "r" || e.code === "Space") {
        e.preventDefault();
        rollDice();
      }
    });

    renderDice();
  </script>
</body>
</html>
